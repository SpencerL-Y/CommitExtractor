commit 317c7bc0ef035d8ebfc3e55c5dde0566fd5fb171
Merge: 529b10c0091d 037493099099
Author: Linus Torvalds <torvalds@linux-foundation.org>
Date:   Thu Mar 28 17:15:33 2024 -0700

    Merge tag 'mmc-v6.9-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/ulfh/mmc
    
    Pull MMC fixes from Ulf Hansson:
     "MMC core:
       - Fix regression for the mmc ioctl
    
      MMC host:
       - sdhci-of-dwcmshc: Fixup PM support in ->remove_new()
       - sdhci-omap: Re-tune when device became runtime suspended"
    
    * tag 'mmc-v6.9-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/ulfh/mmc:
      sdhci-of-dwcmshc: disable PM runtime in dwcmshc_remove()
      mmc: sdhci-omap: re-tuning is needed after a pm transition to support emmc HS200 mode
      mmc: core: Avoid negative index with array access
      mmc: core: Initialize mmc_blk_ioc_data

commit 529b10c0091d6bda6d54fc72711a28f3ea01a72c
Merge: 6e7a2ffd209b 1506d96119eb
Author: Linus Torvalds <torvalds@linux-foundation.org>
Date:   Thu Mar 28 14:54:49 2024 -0700

    Merge tag 'sound-6.9-rc2' of git://git.kernel.org/pub/scm/linux/kernel/git/tiwai/sound
    
    Pull sound fixes from Takashi Iwai:
     "A collection of device-specific small fixes: a series of fixes for
      TAS2781 HD-audio codec, ASoC SOF, Cirrus CS35L56 and a couple of
      legacy drivers"
    
    * tag 'sound-6.9-rc2' of git://git.kernel.org/pub/scm/linux/kernel/git/tiwai/sound:
      ALSA: hda/tas2781: remove useless dev_dbg from playback_hook
      ALSA: hda/tas2781: add debug statements to kcontrols
      ALSA: hda/tas2781: add locks to kcontrols
      ALSA: hda/tas2781: remove digital gain kcontrol
      ALSA: aoa: avoid false-positive format truncation warning
      ALSA: sh: aica: reorder cleanup operations to avoid UAF bugs
      ALSA: hda: cs35l56: Set the init_done flag before component_add()
      ALSA: hda: cs35l56: Raise device name message log level
      ASoC: SOF: ipc4-topology: support NHLT device type
      ALSA: hda: intel-nhlt: add intel_nhlt_ssp_device_type() function

commit 6e7a2ffd209b59e98b6617d4b8be01af2391b580
Merge: d8e8fbec00eb c404f55c26fc
Author: Linus Torvalds <torvalds@linux-foundation.org>
Date:   Thu Mar 28 14:40:46 2024 -0700

    Merge tag 'iommu-fixes-v6.9-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/joro/iommu
    
    Pull iommu fixes from Joerg Roedel:
     "ARM SMMU fixes:
    
       - Fix swabbing of the STE fields in the unlikely event of running on
         a big-endian machine
    
       - Fix setting of STE.SHCFG on hardware that doesn't implement support
         for attribute overrides
    
      IOMMU core:
    
       - PASID validation fix in device attach path"
    
    * tag 'iommu-fixes-v6.9-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/joro/iommu:
      iommu: Validate the PASID in iommu_attach_device_pasid()
      iommu/arm-smmu-v3: Fix access for STE.SHCFG
      iommu/arm-smmu-v3: Add cpu_to_le64() around STRTAB_STE_0_V

commit d8e8fbec00eb59be0a438d52ba81315af0b8960b
Merge: 50108c352db7 99dc2ef0397d
Author: Linus Torvalds <torvalds@linux-foundation.org>
Date:   Thu Mar 28 14:35:32 2024 -0700

    Merge tag 'nfsd-6.9-1' of git://git.kernel.org/pub/scm/linux/kernel/git/cel/linux
    
    Pull nfsd fixes from Chuck Lever:
    
     - Address three recently introduced regressions
    
    * tag 'nfsd-6.9-1' of git://git.kernel.org/pub/scm/linux/kernel/git/cel/linux:
      NFSD: CREATE_SESSION must never cache NFS4ERR_DELAY replies
      SUNRPC: Revert 561141dd494382217bace4d1a51d08168420eace
      nfsd: Fix error cleanup path in nfsd_rename()

commit 50108c352db70405b3d71d8099d0b3adc3b3352c
Merge: 8d025e2092e2 18685451fc4e
Author: Linus Torvalds <torvalds@linux-foundation.org>
Date:   Thu Mar 28 13:09:37 2024 -0700

    Merge tag 'net-6.9-rc2' of git://git.kernel.org/pub/scm/linux/kernel/git/netdev/net
    
    Pull networking fixes from Paolo Abeni:
     "Including fixes from bpf, WiFi and netfilter.
    
      Current release - regressions:
    
       - ipv6: fix address dump when IPv6 is disabled on an interface
    
      Current release - new code bugs:
    
       - bpf: temporarily disable atomic operations in BPF arena
    
       - nexthop: fix uninitialized variable in nla_put_nh_group_stats()
    
      Previous releases - regressions:
    
       - bpf: protect against int overflow for stack access size
    
       - hsr: fix the promiscuous mode in offload mode
    
       - wifi: don't always use FW dump trig
    
       - tls: adjust recv return with async crypto and failed copy to
         userspace
    
       - tcp: properly terminate timers for kernel sockets
    
       - ice: fix memory corruption bug with suspend and rebuild
    
       - at803x: fix kernel panic with at8031_probe
    
       - qeth: handle deferred cc1
    
      Previous releases - always broken:
    
       - bpf: fix bug in BPF_LDX_MEMSX
    
       - netfilter: reject table flag and netdev basechain updates
    
       - inet_defrag: prevent sk release while still in use
    
       - wifi: pick the version of SESSION_PROTECTION_NOTIF
    
       - wwan: t7xx: split 64bit accesses to fix alignment issues
    
       - mlxbf_gige: call request_irq() after NAPI initialized
    
       - hns3: fix kernel crash when devlink reload during pf
         initialization"
    
    * tag 'net-6.9-rc2' of git://git.kernel.org/pub/scm/linux/kernel/git/netdev/net: (81 commits)
      inet: inet_defrag: prevent sk release while still in use
      Octeontx2-af: fix pause frame configuration in GMP mode
      net: lan743x: Add set RFE read fifo threshold for PCI1x1x chips
      net: bcmasp: Remove phy_{suspend/resume}
      net: bcmasp: Bring up unimac after PHY link up
      net: phy: qcom: at803x: fix kernel panic with at8031_probe
      netfilter: arptables: Select NETFILTER_FAMILY_ARP when building arp_tables.c
      netfilter: nf_tables: skip netdev hook unregistration if table is dormant
      netfilter: nf_tables: reject table flag and netdev basechain updates
      netfilter: nf_tables: reject destroy command to remove basechain hooks
      bpf: update BPF LSM designated reviewer list
      bpf: Protect against int overflow for stack access size
      bpf: Check bloom filter map value size
      bpf: fix warning for crash_kexec
      selftests: netdevsim: set test timeout to 10 minutes
      net: wan: framer: Add missing static inline qualifiers
      mlxbf_gige: call request_irq() after NAPI initialized
      tls: get psock ref after taking rxlock to avoid leak
      selftests: tls: add test with a partially invalid iov
      tls: adjust recv return with async crypto and failed copy to userspace
      ...

commit 18685451fc4e546fc0e718580d32df3c0e5c8272
Author: Florian Westphal <fw@strlen.de>
Date:   Tue Mar 26 11:18:41 2024 +0100

    inet: inet_defrag: prevent sk release while still in use
    
    ip_local_out() and other functions can pass skb->sk as function argument.
    
    If the skb is a fragment and reassembly happens before such function call
    returns, the sk must not be released.
    
    This affects skb fragments reassembled via netfilter or similar
    modules, e.g. openvswitch or ct_act.c, when run as part of tx pipeline.
    
    Eric Dumazet made an initial analysis of this bug.  Quoting Eric:
      Calling ip_defrag() in output path is also implying skb_orphan(),
      which is buggy because output path relies on sk not disappearing.
    
      A relevant old patch about the issue was :
      8282f27449bf ("inet: frag: Always orphan skbs inside ip_defrag()")
    
      [..]
    
      net/ipv4/ip_output.c depends on skb->sk being set, and probably to an
      inet socket, not an arbitrary one.
    
      If we orphan the packet in ipvlan, then downstream things like FQ
      packet scheduler will not work properly.
    
      We need to change ip_defrag() to only use skb_orphan() when really
      needed, ie whenever frag_list is going to be used.
    
    Eric suggested to stash sk in fragment queue and made an initial patch.
    However there is a problem with this:
    
    If skb is refragmented again right after, ip_do_fragment() will copy
    head->sk to the new fragments, and sets up destructor to sock_wfree.
    IOW, we have no choice but to fix up sk_wmem accouting to reflect the
    fully reassembled skb, else wmem will underflow.
    
    This change moves the orphan down into the core, to last possible moment.
    As ip_defrag_offset is aliased with sk_buff->sk member, we must move the
    offset into the FRAG_CB, else skb->sk gets clobbered.
    
    This allows to delay the orphaning long enough to learn if the skb has
    to be queued or if the skb is completing the reasm queue.
    
    In the former case, things work as before, skb is orphaned.  This is
    safe because skb gets queued/stolen and won't continue past reasm engine.
    
    In the latter case, we will steal the skb->sk reference, reattach it to
    the head skb, and fix up wmem accouting when inet_frag inflates truesize.
    
    Fixes: 7026b1ddb6b8 ("netfilter: Pass socket pointer down through okfn().")
    Diagnosed-by: Eric Dumazet <edumazet@google.com>
    Reported-by: xingwei lee <xrivendell7@gmail.com>
    Reported-by: yue sun <samsun1006219@gmail.com>
    Reported-by: syzbot+e5167d7144a62715044c@syzkaller.appspotmail.com
    Signed-off-by: Florian Westphal <fw@strlen.de>
    Reviewed-by: Eric Dumazet <edumazet@google.com>
    Link: https://lore.kernel.org/r/20240326101845.30836-1-fw@strlen.de
    Signed-off-by: Paolo Abeni <pabeni@redhat.com>

commit 40d4b4807cadd83fb3f46cc8cd67a945b5b25461
Author: Hariprasad Kelam <hkelam@marvell.com>
Date:   Tue Mar 26 10:57:20 2024 +0530

    Octeontx2-af: fix pause frame configuration in GMP mode
    
    The Octeontx2 MAC block (CGX) has separate data paths (SMU and GMP) for
    different speeds, allowing for efficient data transfer.
    
    The previous patch which added pause frame configuration has a bug due
    to which pause frame feature is not working in GMP mode.
    
    This patch fixes the issue by configurating appropriate registers.
    
    Fixes: f7e086e754fe ("octeontx2-af: Pause frame configuration at cgx")
    Signed-off-by: Hariprasad Kelam <hkelam@marvell.com>
    Reviewed-by: Simon Horman <horms@kernel.org>
    Link: https://lore.kernel.org/r/20240326052720.4441-1-hkelam@marvell.com
    Signed-off-by: Paolo Abeni <pabeni@redhat.com>

commit e4a58989f5c839316ac63675e8800b9eed7dbe96
Author: Raju Lakkaraju <Raju.Lakkaraju@microchip.com>
Date:   Tue Mar 26 12:28:05 2024 +0530

    net: lan743x: Add set RFE read fifo threshold for PCI1x1x chips
    
    PCI11x1x Rev B0 devices might drop packets when receiving back to back frames
    at 2.5G link speed. Change the B0 Rev device's Receive filtering Engine FIFO
    threshold parameter from its hardware default of 4 to 3 dwords to prevent the
    problem. Rev C0 and later hardware already defaults to 3 dwords.
    
    Fixes: bb4f6bffe33c ("net: lan743x: Add PCI11010 / PCI11414 device IDs")
    Signed-off-by: Raju Lakkaraju <Raju.Lakkaraju@microchip.com>
    Reviewed-by: Simon Horman <horms@kernel.org>
    Link: https://lore.kernel.org/r/20240326065805.686128-1-Raju.Lakkaraju@microchip.com
    Signed-off-by: Paolo Abeni <pabeni@redhat.com>

commit eb67cdb33fb493160c062add2eb95d4b2aac08d5
Merge: 6a4aee277740 4494c10e0071
Author: Paolo Abeni <pabeni@redhat.com>
Date:   Thu Mar 28 10:46:38 2024 +0100

    Merge branch 'net-bcmasp-phy-managements-fixes'
    
    Justin Chen says:
    
    ====================
    net: bcmasp: phy managements fixes
    
    Fix two issues.
    
    - The unimac may be put in a bad state if PHY RX clk doesn't exist
      during reset. Work around this by bringing the unimac out of reset
      during phy up.
    
    - Remove redundant phy_{suspend/resume}
    ====================
    
    Link: https://lore.kernel.org/r/20240325193025.1540737-1-justin.chen@broadcom.com
    Signed-off-by: Paolo Abeni <pabeni@redhat.com>

commit 4494c10e007121de6d3fbef909d38b4a64087239
Author: Justin Chen <justin.chen@broadcom.com>
Date:   Mon Mar 25 12:30:25 2024 -0700

    net: bcmasp: Remove phy_{suspend/resume}
    
    phy_{suspend/resume} is redundant. It gets called from phy_{stop/start}.
    
    Fixes: 490cb412007d ("net: bcmasp: Add support for ASP2.0 Ethernet controller")
    Signed-off-by: Justin Chen <justin.chen@broadcom.com>
    Signed-off-by: Paolo Abeni <pabeni@redhat.com>
